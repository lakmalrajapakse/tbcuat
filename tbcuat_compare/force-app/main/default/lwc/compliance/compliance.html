<template>
    <article class="slds-card slds-m-bottom_small">
        <div class="slds-card__header slds-grid">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure">
                    <lightning-icon
                        icon-name="custom:custom73"
                        alternative-text="Compliance"
                        title="Compliance"
                    ></lightning-icon>
                </div>
                <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                        <a href="#" class="slds-card__header-link slds-truncate" title="Manage Compliance">
                            <span>Manage Compliance</span>
                        </a>
                    </h2>
                </div>
            </header>
        </div>
    </article>

    <article class="slds-card slds-p-around_small">
        <div class="slds-card__body slds-card__body_inner grid-container">
            <lightning-spinner alternative-text="Loading" if:true={isLoading} variant="brand"></lightning-spinner>
            <lightning-tabset if:true={hasData}>
                <lightning-tab label="Qualifications" class="slds-p-horizontal_medium">
                    <lightning-tabset if:true={hasData}>
                        <template for:each={categories} for:item="category">
                            <lightning-tab
                                key={category.key}
                                label={category.label}
                                class="slds-m-left_xx-small slds-m-right_xx-small"
                            >
                                <c-compliance-qualifications
                                    contact-id={recordId}
                                    categories={category.categoryTypes}
                                ></c-compliance-qualifications>
                            </lightning-tab>
                        </template>
                    </lightning-tabset>
                </lightning-tab>
                <lightning-tab label="Ratings">
                    <c-compliance-ratings contact-id={recordId}></c-compliance-ratings>
                </lightning-tab>
            </lightning-tabset>
            <c-no-data-illustration if:false={hasData} class="slds-align_absolute-center fill-vertical">
                <div slot="message" class="slds-text-body_regular">Cannot find any categories</div>
            </c-no-data-illustration>
        </div>
    </article>
</template>