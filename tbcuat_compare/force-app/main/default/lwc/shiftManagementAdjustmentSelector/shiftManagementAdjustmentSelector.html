<template>
    <div class="slds-is-relative">
        <lightning-spinner alternative-text="Loading" if:true={isLoading} variant="brand"></lightning-spinner>
        <lightning-layout multiple-rows>
            <lightning-layout-item size="8"> </lightning-layout-item>
            <lightning-layout-item size="4">
                <fieldset class="slds-form-element slds-form-element_compound">
                    <legend class="slds-form-element__legend slds-form-element__label">
                        Bulk Edit Selected Records
                    </legend>
                    <div class="slds-form-element__control">
                        <lightning-combobox
                            name="attribute-combobox"
                            label="Attribute"
                            value={selectedAttribute}
                            placeholder="Select Attribute"
                            options={attributeOptions}
                            onchange={handleAttributeChange}
                        ></lightning-combobox>
                        <template if:true={isPoNumberAttribute}>
                            <lightning-input
                                type="text"
                                label="Value"
                                onchange={handleBulkPoNumberChange}
                            ></lightning-input>
                            <div class="slds-m-top_small">
                                <lightning-button
                                    class="slds-form-element"
                                    variant="brand"
                                    label="Apply"
                                    onclick={handleApplyPoNumberClick}
                                    value={bulkPoNumber}
                                    disabled={applyDisabled}
                                ></lightning-button>
                            </div>
                        </template>
                        <template if:true={isChargeRateAttribute}>
                            <lightning-input
                                type="number"
                                formatter="currency"
                                label="Value"
                                onchange={handleBulkChargeRateChange}
                            ></lightning-input>
                            <div class="slds-m-top_small">
                                <lightning-button
                                    class="slds-form-element"
                                    variant="brand"
                                    label="Apply"
                                    onclick={handleApplyChargeRateClick}
                                    value={bulkChargeRate}
                                    disabled={applyDisabled}
                                ></lightning-button>
                            </div>
                        </template>
                        <template if:true={isPayRateAttribute}>
                            <lightning-input
                                type="number"
                                formatter="currency"
                                label="Value"
                                onchange={handleBulkPayRateChange}
                            ></lightning-input>
                            <div class="slds-m-top_small">
                                <lightning-button
                                    class="slds-form-element"
                                    variant="brand"
                                    label="Apply"
                                    onclick={handleApplyPayRateClick}
                                    value={bulkPayRate}
                                    disabled={applyDisabled}
                                ></lightning-button>
                            </div>
                        </template>
                        <template if:true={isPayElementAttribute}>
                            <lightning-combobox
                                label="Pay Element"
                                placeholder="Select Pay Element"
                                value={bulkPayElement}
                                options={inTimePayElementOptions}
                                onchange={handleBulkPayElementChange}
                            ></lightning-combobox>
                            <div class="slds-m-top_small">
                                <lightning-button
                                    class="slds-form-element"
                                    variant="brand"
                                    label="Apply"
                                    onclick={handleApplyPayElementClick}
                                    value={bulkPayElement}
                                    disabled={applyDisabled}
                                ></lightning-button>
                            </div>
                        </template>
                    </div>
                </fieldset>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12">
                <template if:true={hasData}>
                    <c-shift-management-adjustment-filters
                        data={paginatedData}
                        ontimesheetsearch={handleTimesheetSearch}
                    ></c-shift-management-adjustment-filters>
                </template>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="12">
                <lightning-layout multiple-rows class="slds-m-bottom_small">
                    <lightning-layout-item size="4">
                        <div class="pagination-bar">
                            <lightning-button-icon
                                class="page-button-previous"
                                icon-name="utility:back"
                                variant="bare"
                                alternative-text="Previous Page"
                                title="Previous Page"
                                onclick={handlePreviousPageClick}
                            ></lightning-button-icon>
                            <lightning-input
                                class="slds-m-left_small page-number-input"
                                type="number"
                                label="Page No"
                                value={pageNumber}
                                onchange={handlePageNumberChange}
                            ></lightning-input>
                            <div class="page-count">of {pageCount}</div>
                            <lightning-button-icon
                                class="page-button-next"
                                icon-name="utility:forward"
                                variant="bare"
                                alternative-text="Next Page"
                                title="Next Page"
                                onclick={handleNextPageClick}
                            ></lightning-button-icon>
                            <lightning-combobox
                                class="page-size-input"
                                label="Page Size"
                                value={pageSize}
                                placeholder="Select Page Size"
                                options={pageSizeOptions}
                                onchange={handlePageSizeChange}
                            ></lightning-combobox>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
                <div class="grid">
                    <c-custom-data-table
                        if:true={hasData}
                        columns={columns}
                        data={paginatedData}
                        key-field="Id"
                        onrowselection={handleRowSelection}
                        oncellchange={handleCellChange}
                        draft-values={draftData}
                        suppress-bottom-bar
                    ></c-custom-data-table>
                    <c-no-data-illustration if:false={hasData} class="slds-align_absolute-center" style="height: 250px">
                        <div slot="message" class="slds-text-body_regular">No data to show, yet.</div>
                    </c-no-data-illustration>
                </div>
            </lightning-layout-item>
        </lightning-layout>
    </div>
</template>